// Generated by CoffeeScript 1.4.0
(function() {
  var async;

  async = require("./async");

  module.exports = {
    scan: function(string, regexp, globalMatch) {
      var result, _scan;
      if (globalMatch == null) {
        globalMatch = false;
      }
      result = [];
      _scan = function(s) {
        var l, match;
        match = regexp.exec(s);
        if (match) {
          if (match.length === 1) {
            result.push(match[0]);
          } else {
            result.push(match.slice(1));
          }
          l = match[0].length;
          if (globalMatch) {
            l = 1;
          }
          if (match.index + l < s.length) {
            return _scan(s.substring(match.index + l));
          }
        }
      };
      _scan(string);
      return result;
    },
    functionName: function(f) {
      var _ref;
      if (f.__name__) {
        return f.__name__;
      }
      if (f.name) {
        return f.name;
      }
      return (_ref = f.toString().match(/\W*function\s+([\w\$]+)\(/)) != null ? _ref[1] : void 0;
    }
  };

}).call(this);
